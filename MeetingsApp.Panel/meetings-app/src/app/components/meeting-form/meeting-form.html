<div class="meeting-form-container">
  <div class="meeting-form-card">
    <div class="form-header">
      <h1>Yeni ToplantÄ± OluÅŸtur</h1>
      <p>ToplantÄ± detaylarÄ±nÄ± doldurun</p>
    </div>

    <form [formGroup]="meetingForm" (ngSubmit)="onSubmit()" class="meeting-form">
      <div class="form-group">
        <label for="title">ToplantÄ± BaÅŸlÄ±ÄŸÄ± *</label>
        <input 
          type="text" 
          id="title" 
          formControlName="title" 
          placeholder="ToplantÄ± baÅŸlÄ±ÄŸÄ±nÄ± giriniz"
          [class.error]="meetingForm.get('title')?.invalid && meetingForm.get('title')?.touched"
        />
        <div class="error-message" *ngIf="meetingForm.get('title')?.invalid && meetingForm.get('title')?.touched">
          <span *ngIf="meetingForm.get('title')?.errors?.['required']">ToplantÄ± baÅŸlÄ±ÄŸÄ± gereklidir</span>
          <span *ngIf="meetingForm.get('title')?.errors?.['minlength']">BaÅŸlÄ±k en az 3 karakter olmalÄ±dÄ±r</span>
        </div>
      </div>

      <div class="form-group">
        <label for="description">AÃ§Ä±klama *</label>
        <textarea 
          id="description" 
          formControlName="description" 
          placeholder="ToplantÄ± aÃ§Ä±klamasÄ±nÄ± giriniz"
          rows="4"
          [class.error]="meetingForm.get('description')?.invalid && meetingForm.get('description')?.touched"
        ></textarea>
        <div class="error-message" *ngIf="meetingForm.get('description')?.invalid && meetingForm.get('description')?.touched">
          <span *ngIf="meetingForm.get('description')?.errors?.['required']">AÃ§Ä±klama gereklidir</span>
          <span *ngIf="meetingForm.get('description')?.errors?.['minlength']">AÃ§Ä±klama en az 10 karakter olmalÄ±dÄ±r</span>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="startTime">BaÅŸlangÄ±Ã§ ZamanÄ± *</label>
          <input 
            type="datetime-local" 
            id="startTime" 
            formControlName="startTime"
            [class.error]="meetingForm.get('startTime')?.invalid && meetingForm.get('startTime')?.touched"
          />
          <div class="error-message" *ngIf="meetingForm.get('startTime')?.invalid && meetingForm.get('startTime')?.touched">
            <span *ngIf="meetingForm.get('startTime')?.errors?.['required']">BaÅŸlangÄ±Ã§ zamanÄ± gereklidir</span>
            <span *ngIf="meetingForm.get('startTime')?.errors?.['pastDate']">ToplantÄ± zamanÄ± gelecekte olmalÄ±dÄ±r (en az 5 dakika sonra)</span>
          </div>
        </div>

        <div class="form-group">
          <label for="durationInMinutes">SÃ¼re (Dakika) *</label>
          <input 
            type="number" 
            id="durationInMinutes" 
            formControlName="durationInMinutes"
            min="15"
            max="480"
            [class.error]="meetingForm.get('durationInMinutes')?.invalid && meetingForm.get('durationInMinutes')?.touched"
          />
          <div class="error-message" *ngIf="meetingForm.get('durationInMinutes')?.invalid && meetingForm.get('durationInMinutes')?.touched">
            <span *ngIf="meetingForm.get('durationInMinutes')?.errors?.['required']">SÃ¼re gereklidir</span>
            <span *ngIf="meetingForm.get('durationInMinutes')?.errors?.['min']">SÃ¼re en az 15 dakika olmalÄ±dÄ±r</span>
            <span *ngIf="meetingForm.get('durationInMinutes')?.errors?.['max']">SÃ¼re en fazla 480 dakika olmalÄ±dÄ±r</span>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="file">Dosya Ekle (Opsiyonel)</label>
        <div class="file-input-wrapper">
          <input 
            type="file" 
            id="file" 
            (change)="onFileSelected($event)"
            accept=".pdf,.doc,.docx,.ppt,.pptx,.txt"
            [disabled]="loading"
          />
          <div class="file-info" *ngIf="selectedFile">
            <span class="file-name">ğŸ“ {{ selectedFile.name }}</span>
            <span class="file-size">({{ (selectedFile.size / 1024).toFixed(1) }} KB)</span>
          </div>
        </div>
        <small class="file-help">Desteklenen formatlar: PDF, DOC, DOCX, PPT, PPTX, TXT</small>
      </div>

      <!-- Upload Progress -->
      <div class="upload-progress" *ngIf="loading && selectedFile">
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="uploadProgress"></div>
        </div>
        <span class="progress-text">{{ uploadProgress }}% yÃ¼klendi</span>
      </div>

      <!-- Error Message -->
      <div class="error-alert" *ngIf="error">
        <p>{{ error }}</p>
      </div>

      <div class="form-actions">
        <button 
          type="button" 
          class="cancel-button" 
          (click)="cancel()"
          [disabled]="loading"
        >
          Ä°ptal
        </button>
        <button 
          type="submit" 
          class="submit-button" 
          [disabled]="meetingForm.invalid || loading"
        >
          <span *ngIf="!loading">ToplantÄ± OluÅŸtur</span>
          <span *ngIf="loading">
            <span *ngIf="selectedFile && uploadProgress < 100">Dosya YÃ¼kleniyor...</span>
            <span *ngIf="!selectedFile || uploadProgress >= 100">OluÅŸturuluyor...</span>
          </span>
        </button>
      </div>
    </form>
  </div>

  <!-- Success Modal -->
  <app-success-modal
    [meeting]="createdMeeting"
    [isVisible]="showSuccessModal"
    (closeModal)="onSuccessModalClose()"
    (inviteClicked)="onInviteClicked($event)"
  ></app-success-modal>

  <!-- Invite Modal -->
  <app-invite-modal
    [meeting]="createdMeeting"
    [isVisible]="showInviteModal"
    (closeModal)="onInviteModalClose()"
    (invitationsSent)="onInvitationsSent()"
  ></app-invite-modal>
</div>
