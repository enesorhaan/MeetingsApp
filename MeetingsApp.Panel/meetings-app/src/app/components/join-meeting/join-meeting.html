<div class="join-meeting-container">
  <div class="join-meeting-card">
    <!-- Loading -->
    <div class="loading-spinner" *ngIf="loading">
      <div class="spinner"></div>
      <p>ToplantÄ± bilgileri yÃ¼kleniyor...</p>
    </div>

    <!-- Error -->
    <div class="error-section" *ngIf="error && !loading">
      <div class="error-icon">âŒ</div>
      <h2>ToplantÄ± BulunamadÄ±</h2>
      <p>{{ error }}</p>
      <button class="back-button" (click)="router.navigate(['/dashboard'])">
        ğŸ  Ana Sayfaya DÃ¶n
      </button>
    </div>

    <!-- Meeting Details -->
    <div class="meeting-section" *ngIf="meetingDetails && !loading">
      <div class="meeting-header">
        <div class="meeting-icon">ğŸ¯</div>
        <h1>ToplantÄ±ya KatÄ±l</h1>
        <p class="meeting-subtitle">ToplantÄ± bilgilerinizi girerek katÄ±lÄ±m saÄŸlayÄ±n</p>
      </div>

      <div class="meeting-info">
        <h2>{{ meetingDetails.title }}</h2>
        <p class="meeting-description">{{ meetingDetails.description }}</p>
        
        <div class="meeting-meta">
          <div class="meta-item">
            <span class="label">ğŸ“… BaÅŸlangÄ±Ã§:</span>
            <span>{{ formatDateTime(meetingDetails.startTime) }}</span>
          </div>
          <div class="meta-item">
            <span class="label">â° BitiÅŸ:</span>
            <span>{{ formatDateTime(meetingDetails.endTime) }}</span>
          </div>
          <div class="meta-item">
            <span class="label">â±ï¸ SÃ¼re:</span>
            <span>{{ meetingDetails.durationInMinutes }} dakika</span>
          </div>
        </div>
      </div>

      <!-- Join Form -->
      <div class="join-form-section">
        <h3>ğŸ‘¤ KatÄ±lÄ±m Bilgileri</h3>
        
        <!-- Authenticated User -->
        <div *ngIf="isAuthenticated" class="authenticated-user">
          <div class="user-info">
            <div class="user-avatar">
              <span class="avatar-icon">ğŸ‘¤</span>
            </div>
            <div class="user-details">
              <p class="user-name">{{ currentUser?.firstName }} {{ currentUser?.lastName }}</p>
              <p class="user-email">{{ currentUser?.email }}</p>
            </div>
          </div>
          <p class="join-message">Bu bilgilerle toplantÄ±ya katÄ±lacaksÄ±nÄ±z.</p>
          <button 
            class="join-button primary" 
            (click)="onSubmit()"
            [disabled]="loading"
          >
            <span *ngIf="!loading">ğŸš€ ToplantÄ±ya KatÄ±l</span>
            <span *ngIf="loading">â³ KatÄ±lÄ±yor...</span>
          </button>
        </div>

        <!-- Guest User -->
        <div *ngIf="!isAuthenticated" class="guest-user">
          <p class="guest-info">
            Misafir olarak katÄ±lmak iÃ§in bilgilerinizi girin veya 
            <a href="#" (click)="onLogin(); $event.preventDefault()">giriÅŸ yapÄ±n</a>.
          </p>
          
          <form [formGroup]="joinForm" (ngSubmit)="onSubmit()" class="join-form">
            <div class="form-row">
              <div class="form-group">
                <label for="firstName">Ad *</label>
                <input 
                  type="text" 
                  id="firstName" 
                  formControlName="firstName"
                  placeholder="AdÄ±nÄ±z"
                  [class.error]="joinForm.get('firstName')?.invalid && joinForm.get('firstName')?.touched"
                />
                <div class="error-message" *ngIf="joinForm.get('firstName')?.invalid && joinForm.get('firstName')?.touched">
                  <span *ngIf="joinForm.get('firstName')?.errors?.['required']">Ad gereklidir</span>
                  <span *ngIf="joinForm.get('firstName')?.errors?.['minlength']">Ad en az 2 karakter olmalÄ±dÄ±r</span>
                </div>
              </div>

              <div class="form-group">
                <label for="lastName">Soyad *</label>
                <input 
                  type="text" 
                  id="lastName" 
                  formControlName="lastName"
                  placeholder="SoyadÄ±nÄ±z"
                  [class.error]="joinForm.get('lastName')?.invalid && joinForm.get('lastName')?.touched"
                />
                <div class="error-message" *ngIf="joinForm.get('lastName')?.invalid && joinForm.get('lastName')?.touched">
                  <span *ngIf="joinForm.get('lastName')?.errors?.['required']">Soyad gereklidir</span>
                  <span *ngIf="joinForm.get('lastName')?.errors?.['minlength']">Soyad en az 2 karakter olmalÄ±dÄ±r</span>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="email">Email *</label>
              <input 
                type="email" 
                id="email" 
                formControlName="email"
                placeholder="Email adresiniz"
                [class.error]="joinForm.get('email')?.invalid && joinForm.get('email')?.touched"
              />
              <div class="error-message" *ngIf="joinForm.get('email')?.invalid && joinForm.get('email')?.touched">
                <span *ngIf="joinForm.get('email')?.errors?.['required']">Email gereklidir</span>
                <span *ngIf="joinForm.get('email')?.errors?.['email']">GeÃ§erli bir email adresi giriniz</span>
              </div>
            </div>

            <div class="join-actions">
              <button 
                type="submit" 
                class="join-button primary"
                [disabled]="joinForm.invalid || loading"
              >
                <span *ngIf="!loading">ğŸ‘¤ Misafir Olarak KatÄ±l</span>
                <span *ngIf="loading">â³ KatÄ±lÄ±yor...</span>
              </button>
              
              <button 
                type="button" 
                class="join-button secondary"
                (click)="onLogin()"
              >
                ğŸ” GiriÅŸ Yap
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div> 